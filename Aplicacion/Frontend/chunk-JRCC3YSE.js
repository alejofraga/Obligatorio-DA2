import{a as Y}from"./chunk-GEBP7ZCE.js";import{a as X}from"./chunk-PTJDRHHQ.js";import{a as W}from"./chunk-BZ2FDTJU.js";import{$ as Z,A as a,Aa as w,B as m,Ba as N,C as s,G as j,H as I,I as d,K as f,Y as _,_ as V,ba as $,f as U,fa as J,ga as H,h as z,j as M,ja as G,k as R,ka as K,l as E,la as Q,m as h,ma as L,n as P,na as v,pa as p,ra as q,sa as g,t as i,u as c,v as O,wa as ee,x as n,xa as y,z as l,za as b}from"./chunk-EPVYEA6G.js";var A=class o{static \u0275fac=function(r){return new(r||o)};static \u0275cmp=h({type:o,selectors:[["app-authentication-page"]],decls:1,vars:0,template:function(r,e){r&1&&s(0,"router-outlet")},dependencies:[J]})};function fe(o,t){if(o&1&&s(0,"app-information-alert",13),o&2){let r=I();n("message",r.errorMessage)}}var x=class o{constructor(t,r,e,u){this.authService=t;this.router=r;this.loadingService=e;this.sharedService=u}loginForm;errorMessage="";formField={email:{name:"email",required:"Email es requerido",email:"Email no es valido",class:""},password:{name:"password",required:"Contrase\xF1a es requerida",minlength:"Contrase\xF1a debe tener al menos 6 caracteres",class:""}};ngOnInit(){this.loginForm=new q({[this.formField.email.name]:new g("",[p.required,p.email]),[this.formField.password.name]:new g("",[p.required,p.minLength(6)])})}onSubmit=t=>{if(!this.loginForm.valid)return;let r=t[this.formField.email.name],e=t[this.formField.password.name];this.loadingService.show(),this.authService.login(r,e).subscribe({next:()=>{this.loadingService.hide(),this.router.navigate(["/"]),this.sharedService.emitRoleUpdated(),this.loginForm.reset(),this.errorMessage=""},error:u=>{this.loadingService.hide(),this.errorMessage=u.details}})};loginClass="btn btn-primary";registerClass="btn btn-primary";registerOption=()=>{this.router.navigate(["/register-home-owner"])};static \u0275fac=function(r){return new(r||o)(c(W),c(H),c(L),c(Y))};static \u0275cmp=h({type:o,selectors:[["app-login-form"]],decls:18,vars:23,consts:[[1,"d-flex","justify-content-center","align-items-center","vh-100","bg-light"],[1,"container","p-5","shadow-lg","rounded","bg-white",2,"max-width","450px"],[1,"text-center","mb-4","text-primary"],[1,"'w-100'",3,"ngSubmit","form"],[1,"mb-3"],[1,"form-label","text-muted",3,"for"],["type","text",3,"placeholder","name","form","formField"],["type","password",3,"placeholder","name","form","formField"],[1,"text-center","mt-4","d-grid","gap-2"],[3,"title"],[3,"title","onClick"],[1,"col-12","mt-3"],["type","error",3,"message",4,"ngIf"],["type","error",3,"message"]],template:function(r,e){r&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),f(3,"Login"),m(),a(4,"app-form",3),j("ngSubmit",function(S){return e.onSubmit(S)}),a(5,"div",4)(6,"label",5),f(7,"Email"),m(),s(8,"app-form-input",6),m(),a(9,"div",4)(10,"label",5),f(11,"Password"),m(),s(12,"app-form-input",7),m(),a(13,"div",8),s(14,"app-form-button",9)(15,"app-button",10),m(),a(16,"div",11),O(17,fe,1,1,"app-information-alert",12),m()()()()),r&2&&(i(4),n("form",e.loginForm),i(2),n("for",e.formField.email.name),i(2),l(e.formField.email.class),n("placeholder","email@example.com")("name",e.formField.email.name)("form",e.loginForm)("formField",e.formField),i(2),n("for",e.formField.password.name),i(2),l(e.formField.password.class),n("placeholder","*****")("name",e.formField.password.name)("form",e.loginForm)("formField",e.formField),i(2),l("btn btn-primary btn-lg w-100"),n("title","Login"),i(),l("btn btn-outline-secondary btn-lg w-100"),n("title","Register as Home Owner")("onClick",e.registerOption),i(2),n("ngIf",e.errorMessage))},dependencies:[_,y,w,b,v,N],encapsulation:2})};var D=class o extends Q{constructor(r){super(K.apiUrl,"homeowners",r);this.http=r}register(r){return this.post(r)}static \u0275fac=function(e){return new(e||o)(E(Z))};static \u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})};var T=class o{constructor(t){this.homeOwnerRepository=t}register(t,r,e,u,S){return this.homeOwnerRepository.register({Name:t,LastName:r,Email:e,Password:u,ProfilePicturePath:S}).pipe(z(F=>F.status===0?(console.error("No se pudo establecer la conexi\xF3n con el servidor"),U("No se pudo establecer la conexi\xF3n con el servidor")):U(F)))}static \u0275fac=function(r){return new(r||o)(E(D))};static \u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})};function ge(o,t){if(o&1&&s(0,"app-information-alert",18),o&2){let r=I();n("message",r.successMessage)}}function Fe(o,t){if(o&1&&s(0,"app-information-alert",19),o&2){let r=I();n("message",r.errorMessage)}}var k=class o{constructor(t,r,e,u){this.homeOwnerService=t;this.router=r;this.loadingService=e;this.userService=u}registerForm;successMessage="";errorMessage="";formField={name:{name:"name",required:"name required",text:"name must be text",class:"form-control"},lastname:{name:"lastname",required:"lastname required",text:"lastname must be text",class:"form-control"},email:{name:"email",required:"Email required",email:"Email is not valid",class:"form-control"},password:{name:"password",required:"password required",minlength:"password must be at least 6 characters",class:"form-control"},profilePicture:{name:"profilePicture",required:"profile picture required",class:"form-control"}};ngOnInit(){this.registerForm=new q({[this.formField.email.name]:new g("",[p.required,p.email]),[this.formField.password.name]:new g("",[p.required,p.minLength(6)]),[this.formField.name.name]:new g("",[p.required,p.pattern("^[a-zA-Z ]*$")]),[this.formField.lastname.name]:new g("",[p.required,p.pattern("^[a-zA-Z ]*$")]),[this.formField.profilePicture.name]:new g("",[])})}onSubmit=t=>{if(!this.registerForm.valid)return;let r=t[this.formField.email.name],e=t[this.formField.password.name],u=t[this.formField.lastname.name],S=t[this.formField.name.name],F=t[this.formField.profilePicture.name];F||(F=this.userService.getDefaultProfilePicture()),console.log(F),this.loadingService.show(),this.homeOwnerService.register(S,u,r,e,F).subscribe({next:()=>{this.loadingService.hide(),this.registerForm.reset(),this.errorMessage="",this.successMessage="User registered successfully",this.router.navigate(["/login"])},error:ie=>{this.loadingService.hide(),this.errorMessage=ie.details}})};loginClass="btn btn-primary";registerClass="btn btn-primary";loginOption=()=>{this.router.navigate(["/login"])};static \u0275fac=function(r){return new(r||o)(c(T),c(H),c(L),c(X))};static \u0275cmp=h({type:o,selectors:[["app-register-homeowner-form"]],decls:31,vars:43,consts:[[1,"d-flex","justify-content-center","align-items-center","vh-100","bg-light"],[1,"container","p-4","shadow-lg","rounded","bg-white",2,"max-width","700px"],[1,"text-center","mb-2","text-primary"],[3,"ngSubmit","form"],[1,"form-group","mb-3"],[1,"form-label","text-muted",3,"for"],["type","text","placeholder","John",3,"id","name","form","formField"],["type","text","placeholder","Doe",3,"id","name","form","formField"],["type","text","placeholder","email@example.com",3,"id","name","form","formField"],["type","password","placeholder","*****",3,"id","name","form","formField"],[1,"form-group","mb-4"],["type","text","placeholder","https://example",3,"id","name","form","formField"],[1,"d-grid","gap-2","justify-content-center","w-100"],["title","Register"],["title","Login",3,"onClick"],[1,"col-12","mt-3"],["type","success",3,"message",4,"ngIf"],["type","error",3,"message",4,"ngIf"],["type","success",3,"message"],["type","error",3,"message"]],template:function(r,e){r&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),f(3,"Register as a Home Owner"),m(),a(4,"app-form",3),j("ngSubmit",function(){return e.onSubmit(e.registerForm.value)}),a(5,"div",4)(6,"label",5),f(7,"First Name"),m(),s(8,"app-form-input",6),m(),a(9,"div",4)(10,"label",5),f(11,"Last Name"),m(),s(12,"app-form-input",7),m(),a(13,"div",4)(14,"label",5),f(15,"Email"),m(),s(16,"app-form-input",8),m(),a(17,"div",4)(18,"label",5),f(19,"Password"),m(),s(20,"app-form-input",9),m(),a(21,"div",10)(22,"label",5),f(23,"Profile Picture"),m(),s(24,"app-form-input",11),m(),a(25,"div",12),s(26,"app-form-button",13)(27,"app-button",14),m(),a(28,"div",15),O(29,ge,1,1,"app-information-alert",16)(30,Fe,1,1,"app-information-alert",17),m()()()()),r&2&&(i(4),n("form",e.registerForm),i(2),d("for",e.formField.name.name),i(2),l(e.formField.name.class+" form-control"),d("id",e.formField.name.name),n("name",e.formField.name.name)("form",e.registerForm)("formField",e.formField),i(2),d("for",e.formField.lastname.name),i(2),l(e.formField.lastname.class+" form-control"),d("id",e.formField.lastname.name),n("name",e.formField.lastname.name)("form",e.registerForm)("formField",e.formField),i(2),d("for",e.formField.email.name),i(2),l(e.formField.email.class+" form-control"),d("id",e.formField.email.name),n("name",e.formField.email.name)("form",e.registerForm)("formField",e.formField),i(2),d("for",e.formField.password.name),i(2),l(e.formField.password.class+" form-control"),d("id",e.formField.password.name),n("name",e.formField.password.name)("form",e.registerForm)("formField",e.formField),i(2),d("for",e.formField.profilePicture.name),i(2),l(e.formField.profilePicture.class+" form-control"),d("id",e.formField.profilePicture.name),n("name",e.formField.profilePicture.name)("form",e.registerForm)("formField",e.formField),i(2),l("w-100 btn btn-primary btn-lg"),i(),l("w-100 btn btn-outline-secondary btn-lg"),n("onClick",e.loginOption),i(2),n("ngIf",e.successMessage),i(),n("ngIf",e.errorMessage))},dependencies:[_,y,w,b,v,N]})};var he=[{path:"",component:A,children:[{path:"",component:x},{path:"register-home-owner",component:k}]}],B=class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=P({type:o});static \u0275inj=R({imports:[G.forChild(he),G]})};var te=class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=P({type:o});static \u0275inj=R({imports:[V,B,y,w,b,$,v,ee]})};export{te as a};
