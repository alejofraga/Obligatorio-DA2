import{c as M,d as B}from"./chunk-VER4IG53.js";import{$ as h,A as a,B as c,Ba as w,C as f,G as d,H as C,K as b,L as P,Q as U,R as I,S as $,Y as _,a as D,b as S,j as l,ka as y,l as m,la as O,m as v,ma as R,r as k,t as p,u,v as j,x as n,z as H}from"./chunk-EPVYEA6G.js";var T=class r extends O{constructor(e){super(y.apiUrl,"",e);this.http=e}createCamera(e){return console.log(`se llamo a crear camara con modelo: ${e.ModelNumber}`),this.post(e,"cameras")}createLamp(e){return this.post(e,"lamps")}createSensor(e){return this.post(e,"sensors")}createMovementSensor(e){return this.post(e,"movementSensors")}static \u0275fac=function(t){return new(t||r)(m(h))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var L=class r extends O{constructor(e){super(y.apiUrl,"devices",e);this.http=e}getDevices(e){return this.get("",e)}static \u0275fac=function(t){return new(t||r)(m(h))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var E=class r{constructor(i,e){this.deviceCreationRepository=i;this.deviceRepository=e}getDevices(i){return this.deviceRepository.getDevices(i)}RegisterDevice(i,e,t,o,s,G,J,K,W){switch(i){case"Lamp":return this.deviceCreationRepository.createLamp({Name:e,Description:t,ModelNumber:o,Photos:s});case"Sensor":return this.deviceCreationRepository.createSensor({Name:e,Description:t,ModelNumber:o,Photos:s});case"MovementSensor":return this.deviceCreationRepository.createMovementSensor({Name:e,Description:t,ModelNumber:o,Photos:s});case"Camera":return this.deviceCreationRepository.createCamera({Name:e,Description:t,ModelNumber:o,Photos:s,HasPersonDetection:K,HasMovementDetection:W,IsOutdoor:G,IsIndoor:J});default:throw new Error("Invalid device type")}}static \u0275fac=function(e){return new(e||r)(m(T),m(L))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var N=class r{title;class;currentOffset;changeOffset;disabled=!1;changeOffsetEvent=new k;onButtonClick(){this.disabled||(this.changeOffset+this.currentOffset<0&&this.changeOffsetEvent.emit(this.currentOffset),this.changeOffsetEvent.emit(this.currentOffset+this.changeOffset))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-listing-button"]],inputs:{title:"title",class:"class",currentOffset:"currentOffset",changeOffset:"changeOffset",disabled:"disabled"},outputs:{changeOffsetEvent:"changeOffsetEvent"},standalone:!0,features:[U],decls:2,vars:4,consts:[[3,"click","disabled"]],template:function(e,t){e&1&&(a(0,"button",0),d("click",function(){return t.onButtonClick()}),b(1),c()),e&2&&(H(t.class),n("disabled",t.disabled),p(),P(t.title))}})};var ne=()=>({category:"mainPhoto",alt:"Device Image"}),oe=r=>[r];function se(r,i){if(r&1&&f(0,"app-information-alert",14),r&2){let e=C();n("message",e.warningMessage)}}function ae(r,i){if(r&1&&f(0,"app-information-alert",15),r&2){let e=C();n("message",e.errorMessage)}}var q=class r{constructor(i,e){this.deviceService=i;this.loadingService=e}dataObject={};categories=[{name:"name",alias:"Name"},{name:"companyName",alias:"Company name"},{name:"modelNumber",alias:"Model number"},{name:"deviceType",alias:"Device type"},{name:"mainPhoto",alias:"Main photo"}];options=["name","companyName","modelNumber","deviceType"];warningMessage="";offsetChange=5;limit=5;offset=0;hasMoreUsers=!0;errorMessage="";ngOnInit(){this.fetchData()}onFilterChange(i){let e=Object.keys(i).filter(o=>i[o]&&i[o].trim()!=="").reduce((o,s)=>(o[s]=i[s],o),{}),t=this.buildQueryString(e);setTimeout(()=>{this.offset=0,this.fetchData(t)},500)}buildQueryString(i){return Object.keys(i).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`).join("&")}fetchData(i){this.loadingService.show();let e=i?`${i}&offset=${this.offset}&limit=${this.limit}`:`offset=${this.offset}&limit=${this.limit}`;this.deviceService.getDevices(e).subscribe({next:t=>{this.dataObject=S(D({},t),{originalData:t.data}),this.hasMoreUsers=t.data.length===this.limit,this.loadingService.hide(),this.errorMessage=""},error:t=>{this.errorMessage=t.details||"An error occurred while fetching devices",this.loadingService.hide()}})}onChangeOffset(i){i<0||(this.offset=i,this.fetchData())}static \u0275fac=function(e){return new(e||r)(u(E),u(R))};static \u0275cmp=v({type:r,selectors:[["app-list-devices"]],decls:23,vars:16,consts:[[1,"mb-4","text-center","text-primary","fw-bold"],[1,"container","mt-2","p-4","border","rounded","shadow","bg-light"],[1,"row"],[1,"col-12"],[1,"bg-white","p-3","rounded","shadow-sm"],[1,"col-6"],[3,"filterChange","filterOptions"],[1,"row","mt-4"],[3,"categories","dataObject","imageCategories"],[1,"col-12","d-flex","justify-content-between"],["title","Previous",1,"btn","btn-primary",3,"changeOffsetEvent","currentOffset","changeOffset","disabled"],["title","Next",1,"btn","btn-primary",3,"changeOffsetEvent","currentOffset","changeOffset","disabled"],["type","warning","class","alert alert-warning",3,"message",4,"ngIf"],["type","error","class","",3,"message",4,"ngIf"],["type","warning",1,"alert","alert-warning",3,"message"],["type","error",1,"",3,"message"]],template:function(e,t){e&1&&(a(0,"h1",0),b(1,"Devices"),c(),a(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",2)(7,"div",5)(8,"app-listing-filter",6),d("filterChange",function(s){return t.onFilterChange(s)}),c()(),a(9,"div",5)(10,"app-listing-filter",6),d("filterChange",function(s){return t.onFilterChange(s)}),c()()()()()(),a(11,"div",7)(12,"div",3)(13,"div",4),f(14,"app-listing-table",8),c()()(),a(15,"div",7)(16,"div",9)(17,"app-listing-button",10),d("changeOffsetEvent",function(s){return t.onChangeOffset(s)}),c(),a(18,"app-listing-button",11),d("changeOffsetEvent",function(s){return t.onChangeOffset(s)}),c()()(),a(19,"div",2)(20,"div",3),j(21,se,1,1,"app-information-alert",12)(22,ae,1,1,"app-information-alert",13),c()()()),e&2&&(p(8),n("filterOptions",t.options.slice(0,2)),p(2),n("filterOptions",t.options.slice(2)),p(4),n("categories",t.categories)("dataObject",t.dataObject)("imageCategories",$(14,oe,I(13,ne))),p(3),n("currentOffset",t.offset)("changeOffset",-t.offsetChange)("disabled",t.offset===0),p(),n("currentOffset",t.offset)("changeOffset",t.offsetChange)("disabled",!t.hasMoreUsers),p(3),n("ngIf",t.warningMessage),p(),n("ngIf",t.errorMessage))},dependencies:[_,M,N,B,w]})};var F=class r extends O{constructor(e){super(y.apiUrl,"devicetypes",e);this.http=e}getDevicesTypes(){return this.get()}static \u0275fac=function(t){return new(t||r)(m(h))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var x=class r{constructor(i){this.devicesTypesRepository=i}getDevicesTypes(){return this.devicesTypesRepository.getDevicesTypes()}static \u0275fac=function(e){return new(e||r)(m(F))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};var me=()=>[];function le(r,i){if(r&1&&f(0,"app-information-alert",8),r&2){let e=C();n("message",e.errorMessage)}}var z=class r{constructor(i,e){this.deviceTypesService=i;this.loadingService=e}dataObject={};categories=[{name:"name",alias:"Name"}];errorMessage="";ngOnInit(){this.fetchData()}fetchData(){this.loadingService.show(),this.deviceTypesService.getDevicesTypes().subscribe({next:i=>{this.dataObject=S(D({},i),{originalData:i.data}),this.loadingService.hide(),this.errorMessage=""},error:i=>{this.errorMessage=i.details||"An error occurred while fetching device types",this.loadingService.hide()}})}static \u0275fac=function(e){return new(e||r)(u(x),u(R))};static \u0275cmp=v({type:r,selectors:[["app-list-supported-devices"]],decls:11,vars:5,consts:[[1,"container","mt-4","p-4","border","rounded","shadow","bg-light",2,"width","80%"],[1,"row","text-center"],[1,"col-12"],[1,"mb-2","text-primary","fw-bold"],[1,"row","mt-3"],[1,"bg-white","p-3","rounded","shadow-sm"],[3,"categories","dataObject","imageCategories"],["type","error","class","alert alert-danger",3,"message",4,"ngIf"],["type","error",1,"alert","alert-danger",3,"message"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),b(4,"Supported Device Types"),c()()(),a(5,"div",4)(6,"div",2)(7,"div",5),f(8,"app-listing-table",6),c(),a(9,"div",2),j(10,le,1,1,"app-information-alert",7),c()()()()),e&2&&(p(8),n("categories",t.categories)("dataObject",t.dataObject)("imageCategories",I(4,me)),p(2),n("ngIf",t.errorMessage))},dependencies:[_,M,w]})};export{N as a,E as b,q as c,x as d,z as e};
