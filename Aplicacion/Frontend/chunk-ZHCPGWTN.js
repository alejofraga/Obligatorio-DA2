import{a as D}from"./chunk-A5OJ2OSQ.js";import{a as P,b as v}from"./chunk-YJRYK5MZ.js";import{a as _}from"./chunk-GEBP7ZCE.js";import{a as H}from"./chunk-PTJDRHHQ.js";import{a as M}from"./chunk-BZ2FDTJU.js";import{A as s,B as c,C as a,H as d,K as b,L as C,Q as U,Y as O,_ as T,ga as j,ja as l,k as f,m as g,ma as A,n as h,na as R,s as x,t as n,u as m,v as I,x as r}from"./chunk-EPVYEA6G.js";var p=class t{description;buttonText;buttonAction;imageUrl;title;buttonClass="btn btn-primary";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-card"]],inputs:{description:"description",buttonText:"buttonText",buttonAction:"buttonAction",imageUrl:"imageUrl",title:"title"},standalone:!0,features:[U],decls:13,vars:5,consts:[[1,"container"],[1,"card","mb-5","mt-4","shadow","rounded-4","w-100",2,"border","1px solid #e0e0e0","height","250px"],[1,"row","g-0","h-100"],[1,"col-md-4","d-flex","align-items-center","justify-content-center",2,"position","relative","overflow","hidden","height","100%"],["alt","Card Image",1,"img-fluid","rounded-start",2,"height","100%","width","100%","object-fit","cover",3,"src"],[1,"col-md-8"],[1,"card-body","d-flex","flex-column","justify-content-between","h-100"],[1,"card-title","text-primary","font-weight-bold","display-6"],[1,"card-text","mb-4","text-muted"],[1,"d-flex","justify-content-center","mt-auto"],["icon","bi bi-arrow-right",1,"btn","btn-primary","border-radius",3,"title","onClick"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a(4,"img",4),c(),s(5,"div",5)(6,"div",6)(7,"h5",7),b(8),c(),s(9,"p",8),b(10),c(),s(11,"div",9),a(12,"app-button",10),c()()()()()()),e&2&&(n(4),r("src",i.imageUrl,x),n(4),C(i.title),n(2),C(i.description),n(2),r("title",i.buttonText)("onClick",i.buttonAction))},dependencies:[R]})};function k(t,o){if(t&1&&a(0,"app-card",2),t&2){let e=d();r("description",e.adminDescription)("buttonText","Go to admin page")("buttonAction",e.goToAdmin)("imageUrl",e.adminImageUrl)("title","Admin")}}function J(t,o){if(t&1&&a(0,"app-card",2),t&2){let e=d();r("description",e.companyOwnerDescription)("buttonText","Go to company owner page")("buttonAction",e.goToCompanyOwner)("imageUrl",e.companyOwnerImageUrl)("title","Company Owner")}}function G(t,o){if(t&1&&a(0,"app-card",2),t&2){let e=d();r("description",e.homeOwnerDescription)("buttonText","Go to home owner page")("buttonAction",e.goToHomeOwner)("imageUrl",e.homeOwnerImageUrl)("title","Home Owner")}}function L(t,o){if(t&1&&a(0,"app-card",2),t&2){let e=d();r("description",e.joinHomeOwnerDescription)("buttonText","I want to become a home owner")("buttonAction",e.goToJoinHomeOwner)("imageUrl",e.joinHomeOwnerImageUrl)("title","Convert to Home Owner")}}var w=class t{constructor(o,e,i,u,B,W){this.router=o;this.roleService=e;this.loadingService=i;this.userService=u;this.authService=B;this.sharedService=W}userCards=[];userEmail="";defaultImageUrl="";ngOnInit(){this.loadingService.show();let o=this.authService.getEmail();o&&(this.userEmail=o),this.defaultImageUrl=this.userService.getDefaultProfilePicture(),this.roleService.loadUserRoles().subscribe({next:()=>{this.userCards=this.roleService.getUserRoles(),this.userCards.includes("HomeOwner")||this.userCards.push("join-home-owner"),this.loadingService.hide()},error:e=>{console.error("Error al obtener roles:",e)}})}goToAdmin=()=>{this.router.navigate(["/admin"])};goToCompanyOwner=()=>{this.router.navigate(["/company-owner"])};goToHomeOwner=()=>{this.router.navigate(["/home-owner"])};goToJoinHomeOwner=()=>{if(confirm("This process is irreversible. Are you sure you want to continue?")){let e=confirm("Would you like to add a photo to your profile? If you dont, we will use a default image."),i={ProfilePicturePath:this.defaultImageUrl};this.confirmJoinHomeOwner(),this.userService.updateProfilePicture(this.userEmail,i).subscribe(u=>{e&&(console.log("entre"),this.updateProfilePicture()),console.log(u)},u=>{console.error("Error al actualizar foto de perfil:",u)})}};confirmJoinHomeOwner=()=>{this.roleService.addUserRole("HomeOwner").subscribe(o=>{this.userCards.push("HomeOwner"),this.userCards=this.userCards.filter(e=>e!=="join-home-owner"),this.sharedService.emitRoleUpdated()},o=>{console.error("Error al agregar rol:",o)})};updateProfilePicture=()=>{this.router.navigate(["/update-profile-picture"])};homeOwnerImageUrl="home-owner.jpg";adminImageUrl="admin.jpg";companyOwnerImageUrl="company-owner.jpg";joinHomeOwnerImageUrl="join-home-owner.jpg";homeOwnerDescription="Homeowners can create and manage their homes within the system, receive important notifications related to their household, and manage household members, ensuring a secure and connected environment.";adminDescription="Admins can manage user accounts by listing all accounts, creating new accounts for company owners and other admins, and deleting admin accounts when necessary.";companyOwnerDescription="Company owners are responsible for establishing their company within the system. They can register devices to facilitate service offerings and manage their company\u2019s connected infrastructure.";joinHomeOwnerDescription="Now you can also use your account to manage your home, by clicking on the button below you will configure your account to be a homeowner. Note that this operation is irreversible.";static \u0275fac=function(e){return new(e||t)(m(j),m(P),m(A),m(H),m(M),m(_))};static \u0275cmp=g({type:t,selectors:[["app-main-page"]],decls:6,vars:4,consts:[[1,"main-page",2,"height","100vh"],[3,"description","buttonText","buttonAction","imageUrl","title",4,"ngIf"],[3,"description","buttonText","buttonAction","imageUrl","title"]],template:function(e,i){e&1&&(a(0,"app-header"),s(1,"div",0),I(2,k,1,5,"app-card",1)(3,J,1,5,"app-card",1)(4,G,1,5,"app-card",1)(5,L,1,5,"app-card",1),c()),e&2&&(n(2),r("ngIf",i.userCards.includes("Admin")),n(),r("ngIf",i.userCards.includes("CompanyOwner")),n(),r("ngIf",i.userCards.includes("HomeOwner")),n(),r("ngIf",i.userCards.includes("join-home-owner")))},dependencies:[O,v,p]})};var z=[{path:"",component:w},{path:"",loadChildren:()=>import("./chunk-UBMO3EKE.js").then(t=>t.RolesModule)}],y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=f({imports:[l.forChild(z),l]})};var E=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=h({type:t});static \u0275inj=f({imports:[T,y,v,p,D,l]})};export{E as a};
