import{$ as p,f as l,h as a,i as c,j as i,ka as m,l as n,la as u}from"./chunk-EPVYEA6G.js";var s=class o extends u{constructor(e){super(m.apiUrl,"auth",e);this.http=e}login(e){return this.post(e)}static \u0275fac=function(r){return new(r||o)(n(p))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};var g=class o{constructor(t){this.authRepository=t}token=null;login(t,e){return this.authRepository.login({Email:t,Password:e}).pipe(c(r=>{this.token=r.data.token,this.token?(localStorage.setItem("authToken",this.token),localStorage.setItem("userEmail",t)):console.error("No se recibi\xF3 un token en la respuesta del login")}),a(r=>(console.error("Error en el login:",r),l(r))))}logout(){this.token=null,localStorage.removeItem("authToken"),localStorage.removeItem("userRoles")}isAuthenticated(){return this.getToken()!==null}getToken(){return this.token||localStorage.getItem("authToken")}getEmail(){return localStorage.getItem("userEmail")}getRoles(){let t=localStorage.getItem("userRoles");return t?JSON.parse(t):[]}static \u0275fac=function(e){return new(e||o)(n(s))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{g as a};
