import{a as G,b as Me}from"./chunk-5HCCN27F.js";import{a as _e}from"./chunk-4PZJVYSH.js";import"./chunk-MO7ZBCZV.js";import{a as z}from"./chunk-B4MY55FY.js";import{a as ve,c as ye,d as Fe,e as Ie}from"./chunk-7X5LL6QE.js";import{a as U,b as Ce,c as R,d as be}from"./chunk-VER4IG53.js";import"./chunk-BZ2FDTJU.js";import{$ as P,A as s,Aa as Q,B as r,Ba as H,C as l,F as de,G as d,H as b,I as C,K as g,M as fe,Q as O,X as ue,Y as S,_ as N,a as T,b as k,fa as ge,ga as A,j as y,ja as se,k as V,ka as q,l as F,la as $,m as c,ma as D,n as x,p as le,pa as f,q as pe,r as I,ra as he,sa as w,t as a,u as v,v as _,x as o,xa as B,y as ce,z as u,za as W}from"./chunk-EPVYEA6G.js";var Z=class n{sideBarItems=[{title:"User",operations:["List devices","List supported devices"]},{title:"Home owner",operations:["Create Home","Homes","Notifications"]}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-home-owner-page"]],decls:5,vars:1,consts:[[1,"d-flex",2,"height","100vh"],[1,"flex-shrink-0",3,"items"],[1,"flex-grow-1","d-flex","align-items-start","justify-content-center","p-4"],[1,"w-100",2,"max-width","1000px","margin-left","280px"]],template:function(t,e){t&1&&(s(0,"div",0),l(1,"app-sidebar",1),s(2,"div",2)(3,"div",3),l(4,"router-outlet"),r()()()),t&2&&(a(),o("items",e.sideBarItems))},dependencies:[ge,U]})};var L=class n{homeOwnerImagePath="home-owner-welcome.png";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-welcome-home-owner-component"]],standalone:!0,features:[O],decls:1,vars:2,consts:[[3,"title","imagePath"]],template:function(t,e){t&1&&l(0,"app-welcome",0),t&2&&o("title","home owner")("imagePath",e.homeOwnerImagePath)},dependencies:[Ce]})};var J=class n extends ${constructor(t){super(q.apiUrl,"me/homes",t);this.http=t}createHome(t){return this.post(t)}getHomes(t){return this.get("",t)}static \u0275fac=function(e){return new(e||n)(F(P))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var j=class n{constructor(i){this.meHomeRepository=i}createHome(i,t,e,p,m,ae){return this.meHomeRepository.createHome({Name:i,Address:t,DoorNumber:e,Latitude:p,Longitude:m,MemberCount:ae})}getHomes(i){return this.meHomeRepository.getHomes(i)}static \u0275fac=function(t){return new(t||n)(F(J))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ee(n,i){if(n&1&&l(0,"app-information-alert",18),n&2){let t=b();o("message",t.successMessage)}}function Te(n,i){if(n&1&&l(0,"app-information-alert",19),n&2){let t=b();o("message",t.errorMessage)}}var K=class n{constructor(i,t,e){this.meHomeService=i;this.router=t;this.loadingService=e}homeCreation;successMessage="";errorMessage="";formField={name:{name:"name",text:"name must be text",class:"form-control"},address:{name:"address",required:"address required",text:"address must be text",pattern:"addres must be text only",class:"form-control",minlength:"address must be at least 6 characters long"},doorNumber:{name:"doorNumber",required:"doorNumber required",min:"doorNumber must be a positive number",class:"form-control"},latitude:{name:"latitude",required:"latitude required",min:"latitude must be at least -90",max:"latitude must be at most 90",class:"form-control"},longitude:{name:"longitude",required:"longitude required",min:"longitude must be at least -90",max:"longitude must be at most 90",class:"form-control"},memberCount:{name:"memberCount",required:"memberCount required",min:"memberCount must be a positive number",class:"form-control"}};ngOnInit(){this.homeCreation=new he({[this.formField.address.name]:new w("",[f.required,f.pattern("^[a-zA-Z ]*$"),f.minLength(6)]),[this.formField.doorNumber.name]:new w("",[f.required,f.min(0)]),[this.formField.name.name]:new w("",[f.pattern("^[a-zA-Z ]*$")]),[this.formField.latitude.name]:new w("",[f.required,f.min(-90),f.max(90)]),[this.formField.longitude.name]:new w("",[f.required,f.min(-90),f.max(90)]),[this.formField.memberCount.name]:new w("",[f.required,f.min(0)])})}homeCreationClass="btn btn-primary w-100 mt-3";onSubmit=i=>{if(!this.homeCreation.valid)return;let{name:t,address:e,doorNumber:p,latitude:m,longitude:ae,memberCount:He}=i;t.trim(),this.loadingService.show(),this.meHomeService.createHome(t,e,p,m,ae,He).subscribe({next:()=>{this.homeCreation.reset(),this.loadingService.hide(),this.errorMessage="",this.successMessage="Home created successfully"},error:Re=>{this.loadingService.hide(),this.errorMessage=Re.details,this.successMessage=""}})};static \u0275fac=function(t){return new(t||n)(v(j),v(A),v(D))};static \u0275cmp=c({type:n,selectors:[["app-create-home-form"]],decls:37,vars:47,consts:[[1,"d-flex","justify-content-center"],[1,"container","p-5","shadow","rounded","bg-white",2,"max-width","600px"],[1,"text-center","mb-4","text-primary"],[1,"w-100",3,"ngSubmit","form"],[1,"row"],[1,"col-6"],[1,"mb-3"],[1,"form-label","text-muted",3,"for"],["type","text","placeholder","Summer House",3,"id","name","form","formField"],["type","text","placeholder","Punta del Este",3,"id","name","form","formField"],["type","number","placeholder","999",3,"id","name","form","formField"],["type","number","placeholder","0",3,"id","name","form","formField"],["type","number","placeholder","10",3,"id","name","form","formField"],[1,"text-center","mt-4","d-grid","gap-2"],["title","Register"],[1,"col-12","mt-3"],["type","success",3,"message",4,"ngIf"],["type","error",3,"message",4,"ngIf"],["type","success",3,"message"],["type","error",3,"message"]],template:function(t,e){t&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),g(3,"Register your home"),r(),s(4,"app-form",3),d("ngSubmit",function(){return e.onSubmit(e.homeCreation.value)}),s(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),g(9,"Alias"),r(),l(10,"app-form-input",8),r(),s(11,"div",6)(12,"label",7),g(13,"Address"),r(),l(14,"app-form-input",9),r(),s(15,"div",6)(16,"label",7),g(17,"Door number"),r(),l(18,"app-form-input",10),r()(),s(19,"div",5)(20,"div",6)(21,"label",7),g(22,"Latitude"),r(),l(23,"app-form-input",11),r(),s(24,"div",6)(25,"label",7),g(26,"Longitude"),r(),l(27,"app-form-input",11),r(),s(28,"div",6)(29,"label",7),g(30,"Member count"),r(),l(31,"app-form-input",12),r()()(),s(32,"div",13),l(33,"app-form-button",14),r(),s(34,"div",15),_(35,Ee,1,1,"app-information-alert",16)(36,Te,1,1,"app-information-alert",17),r()()()()),t&2&&(a(4),o("form",e.homeCreation),a(4),C("for",e.formField.name.name),a(2),u(e.formField.name.class),C("id",e.formField.name.name),o("name",e.formField.name.name)("form",e.homeCreation)("formField",e.formField),a(2),C("for",e.formField.address.name),a(2),u(e.formField.address.class),C("id",e.formField.address.name),o("name",e.formField.address.name)("form",e.homeCreation)("formField",e.formField),a(2),C("for",e.formField.doorNumber.name),a(2),u(e.formField.doorNumber.class),C("id",e.formField.doorNumber.name),o("name",e.formField.doorNumber.name)("form",e.homeCreation)("formField",e.formField),a(3),C("for",e.formField.latitude.name),a(2),u(e.formField.latitude.class),C("id",e.formField.latitude.name),o("name",e.formField.latitude.name)("form",e.homeCreation)("formField",e.formField),a(2),C("for",e.formField.longitude.name),a(2),u(e.formField.longitude.class),C("id",e.formField.longitude.name),o("name",e.formField.longitude.name)("form",e.homeCreation)("formField",e.formField),a(2),C("for",e.formField.memberCount.name),a(2),u(e.formField.memberCount.class),C("id",e.formField.memberCount.name),o("name",e.formField.memberCount.name)("form",e.homeCreation)("formField",e.formField),a(2),u("btn btn-primary btn-lg w-100"),a(2),o("ngIf",e.successMessage),a(),o("ngIf",e.errorMessage))},dependencies:[S,B,Q,W,H]})};function Ve(n,i){if(n&1&&l(0,"app-information-alert",11),n&2){let t=b();o("message",t.infoMessage)}}function xe(n,i){if(n&1&&l(0,"app-information-alert",12),n&2){let t=b();o("message",t.errorMessage)}}var X=class n{constructor(i,t,e){this.meHomeService=i;this.router=t;this.loadingService=e}dataObject={};categories=[{name:"name",alias:"Name"},{name:"id",alias:"ID"}];infoMessage="Click on the row of the house you wish to enter to the administration panel.";errorMessage="";offsetChange=3;limit=3;offset=0;hasMoreHomes=!0;ngOnInit(){this.fetchData()}fetchData(i){this.loadingService.show();let t=i?`${i}&offset=${this.offset}&limit=${this.limit}`:`offset=${this.offset}&limit=${this.limit}`;this.meHomeService.getHomes(t).subscribe({next:e=>{this.loadingService.hide(),this.dataObject=k(T({},e),{originalData:e.data}),this.hasMoreHomes=e.data.length===this.limit,this.errorMessage=""},error:e=>{this.loadingService.hide(),this.errorMessage=e.details}})}onChangeOffset(i){i<0||(this.offset=i,this.fetchData())}onRowClick(i){this.router.navigate([`/home-management/${i.id}`])}static \u0275fac=function(t){return new(t||n)(v(j),v(A),v(D))};static \u0275cmp=c({type:n,selectors:[["app-my-homes"]],decls:15,vars:11,consts:[[1,"mb-4","text-center","text-primary","fw-bold"],[1,"container","mt-2","p-4","border","rounded","shadow","bg-light"],[1,"row","mt-4"],[1,"col-12"],[1,"bg-white","p-3","rounded","shadow-sm"],[3,"rowClicked","categories","dataObject","isClickeable"],[1,"col-12","d-flex","justify-content-between"],["title","Previous",1,"btn","btn-primary",3,"changeOffsetEvent","currentOffset","changeOffset","disabled"],["title","Next",1,"btn","btn-primary",3,"changeOffsetEvent","currentOffset","changeOffset","disabled"],["type","info","class","",3,"message",4,"ngIf"],["type","error","class","",3,"message",4,"ngIf"],["type","info",1,"",3,"message"],["type","error",1,"",3,"message"]],template:function(t,e){t&1&&(s(0,"h1",0),g(1,"My Homes"),r(),s(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"app-listing-table",5),d("rowClicked",function(m){return e.onRowClick(m)}),r()()()(),s(7,"div",2)(8,"div",6)(9,"app-listing-button",7),d("changeOffsetEvent",function(m){return e.onChangeOffset(m)}),r(),s(10,"app-listing-button",8),d("changeOffsetEvent",function(m){return e.onChangeOffset(m)}),r()()(),s(11,"div",2)(12,"div",3),_(13,Ve,1,1,"app-information-alert",9)(14,xe,1,1,"app-information-alert",10),r()()()),t&2&&(a(6),o("categories",e.categories)("dataObject",e.dataObject)("isClickeable",!0),a(3),o("currentOffset",e.offset)("changeOffset",-e.offsetChange)("disabled",e.offset===0),a(),o("currentOffset",e.offset)("changeOffset",e.offsetChange)("disabled",!e.hasMoreHomes),a(3),o("ngIf",e.infoMessage),a(),o("ngIf",e.errorMessage))},dependencies:[S,R,ve,H]})};var Y=class n extends ${constructor(t){super(q.apiUrl,"me/notifications",t);this.http=t}getNotifications(t){return this.get("",t)}readNotifications(t){return this.patch(t)}static \u0275fac=function(e){return new(e||n)(F(P))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};var ee=class n{constructor(i){this.meNotificationsRepository=i}getNotifications(i){return this.meNotificationsRepository.getNotifications(i)}readNotifications(i){return this.meNotificationsRepository.readNotifications({NotificationsIds:i})}static \u0275fac=function(t){return new(t||n)(F(Y))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function qe(n,i){if(n&1){let t=de();s(0,"label",1)(1,"input",2),d("change",function(){let p=le(t).$implicit,m=b();return pe(m.onValueChange(p))}),r(),g(2),r()}if(n&2){let t=i.$implicit,e=b();u("btn btn-outline-primary"+(t.checked?" active":"")),a(),ce("display",e.hideCircle?"none":"inline"),o("name",t.name)("checked",t.checked),a(),fe(" ",t.title," ")}}var te=class n{groupClass="";hideCircle=!1;inputOptions;valueChange=new I;onValueChange(i){this.inputOptions.forEach(t=>t.checked=!1),i.checked=!0,this.valueChange.emit(i)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-radio-input"]],inputs:{groupClass:"groupClass",hideCircle:"hideCircle",inputOptions:"inputOptions"},outputs:{valueChange:"valueChange"},standalone:!0,features:[O],decls:2,vars:3,consts:[["style","border-radius: 20px; padding: 0.5rem 1rem; text-align: center; cursor: pointer;",3,"class",4,"ngFor","ngForOf"],[2,"border-radius","20px","padding","0.5rem 1rem","text-align","center","cursor","pointer"],["type","radio","autocomplete","off",3,"change","name","checked"]],template:function(t,e){t&1&&(s(0,"div"),_(1,qe,3,7,"label",0),r()),t&2&&(u(e.groupClass+" d-flex gap-2 flex-wrap"),a(),o("ngForOf",e.inputOptions))},dependencies:[N,ue],encapsulation:2})};var E=class n{inputOptions;groupClass="";hideCircle=!1;filterChange=new I;filterValues={};onFilterValueChange(i){this.filterValues[i.name]=i.value,this.emitFilterChange()}emitFilterChange(){this.filterChange.emit(this.filterValues)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-listing-radio-input-filter"]],inputs:{inputOptions:"inputOptions",groupClass:"groupClass",hideCircle:"hideCircle"},outputs:{filterChange:"filterChange"},standalone:!0,features:[O],decls:1,vars:3,consts:[[3,"valueChange","groupClass","inputOptions","hideCircle"]],template:function(t,e){t&1&&(s(0,"app-radio-input",0),d("valueChange",function(m){return e.onFilterValueChange(m)}),r()),t&2&&o("groupClass",e.groupClass)("inputOptions",e.inputOptions)("hideCircle",e.hideCircle)},dependencies:[N,te],encapsulation:2})};var ie=class n{groupClass="";selectClass="";options=[];selectedValue=null;label="";filterChange=new I;filterValues={};onFilterValueChange(i){this.filterValues[this.label]=i,this.emitFilterChange()}emitFilterChange(){this.filterChange.emit(this.filterValues)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-listing-select-input-filter"]],inputs:{groupClass:"groupClass",selectClass:"selectClass",options:"options",selectedValue:"selectedValue",label:"label"},outputs:{filterChange:"filterChange"},decls:2,vars:7,consts:[[3,"selectedValueChange","options","selectedValue","label"]],template:function(t,e){t&1&&(s(0,"div")(1,"app-select",0),d("selectedValueChange",function(m){return e.onFilterValueChange(m)}),r()()),t&2&&(u(e.groupClass),a(),u(e.selectClass),o("options",e.options)("selectedValue",e.selectedValue)("label",e.label))},dependencies:[z]})};var ne=class n{label="";initalDate="";filterChange=new I;filterValues={};onFilterValueChange(i){this.filterValues[this.label]=i,this.emitFilterChange()}emitFilterChange(){this.filterChange.emit(this.filterValues)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=c({type:n,selectors:[["app-listing-date-input-filter"]],inputs:{label:"label",initalDate:"initalDate"},outputs:{filterChange:"filterChange"},decls:1,vars:2,consts:[[3,"valueChange","label","initalDate"]],template:function(t,e){t&1&&(s(0,"app-date-input",0),d("valueChange",function(m){return e.onFilterValueChange(m)}),r()),t&2&&o("label",e.label)("initalDate",e.initalDate)},dependencies:[G]})};function Qe(n,i){if(n&1&&l(0,"app-information-alert",14),n&2){let t=b();o("message",t.warningMessage)}}function Ue(n,i){if(n&1&&l(0,"app-information-alert",15),n&2){let t=b();o("message",t.errorMessage)}}var oe=class n{constructor(i,t,e){this.meNotificationsService=i;this.deviceTypesService=t;this.loadingService=e}dataObject={};categories=[{name:"message",alias:"Message"},{name:"state",alias:"Readed"},{name:"dateTime",alias:"Date & Time"},{name:"deviceType",alias:"Device Type"},{name:"hardwareId",alias:"Hardware ID"},{name:"Action",alias:""}];actionCategories=[{category:"Action",class:"btn btn-outline-success",title:"Mark as read",onClick:i=>this.readNotification(i),showWhen:i=>!i.state}];groupClass="btn-group btn-group-toggle";radioButtonOptions=[{title:"Unread",name:"Read",class:"btn btn-secondary",checked:!0,value:!1},{title:"Show all",name:"Read",class:"btn btn-secondary",checked:!1,value:null},{title:"Read",name:"Read",class:"btn btn-secondary",checked:!1,value:!0}];warningMessage="";offsetChange=100;limit=100;offset=0;hasMoreNotifications=!1;errorMessage="";selectInputOptions=[{value:null,label:"Any"}];currentFilters={Read:!1};ngOnInit(){let i=this.buildQueryString(this.currentFilters);this.fetchData(i),this.loadDeviceTypesData()}loadDeviceTypesData(){this.deviceTypesService.getDevicesTypes().subscribe({next:i=>{let t=i.data.map(e=>({value:e.name,label:e.name}));this.selectInputOptions=[...this.selectInputOptions,...t],this.errorMessage=""},error:i=>{this.errorMessage=i.details||"An error occurred while fetching device types"}})}readNotification(i){this.meNotificationsService.readNotifications([i.notificationId]).subscribe({next:()=>{let t=this.buildQueryString(this.currentFilters);this.fetchData(t),this.errorMessage=""},error:t=>{this.errorMessage=t.details}})}fetchData(i){let t=i||"";this.loadingService.show(),this.meNotificationsService.getNotifications(t).subscribe({next:e=>{this.dataObject=k(T({},e),{originalData:e.data}),this.loadingService.hide(),this.errorMessage=""},error:e=>{this.errorMessage=e.details||"An error occurred while fetching notifications",this.loadingService.hide()}})}onDateFilterChange(i){this.updateFilters(i)}onSelectFilterChange(i){this.updateFilters(i)}onRadioFilterChange(i){this.updateFilters(i)}updateFilters(i){Object.keys(i).forEach(e=>{let p=i[e];p===null||p==="null"||p===""?delete this.currentFilters[e]:this.currentFilters[e]=p});let t=this.buildQueryString(this.currentFilters);this.fetchData(t)}buildQueryString(i){return Object.keys(i).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(i[t])}`).join("&")}static \u0275fac=function(t){return new(t||n)(v(ee),v(Fe),v(D))};static \u0275cmp=c({type:n,selectors:[["app-list-notifications"]],decls:22,vars:9,consts:[[1,"mb-4","text-center","text-primary","fw-bold"],[1,"container","mt-2","p-4","border","rounded","shadow","bg-light"],[1,"row"],[1,"col-12"],[1,"bg-white","p-3","rounded","shadow-sm"],[1,"col-md-6","mb-3"],["label","DateTime",3,"filterChange"],["selectClass","form-select w-100 mt-2","label","DeviceType",3,"filterChange","options"],[1,"row","mt-3"],[3,"filterChange","inputOptions","groupClass","hideCircle"],[1,"row","mt-4"],["emptyMessage","No notifications found","buttonIcon","bi bi-bookmark-check",3,"categories","dataObject","actionCategories"],["type","warning","class","alert alert-warning",3,"message",4,"ngIf"],["type","error","class","alert alert-danger",3,"message",4,"ngIf"],["type","warning",1,"alert","alert-warning",3,"message"],["type","error",1,"alert","alert-danger",3,"message"]],template:function(t,e){t&1&&(s(0,"h1",0),g(1,"Notifications"),r(),s(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",2)(7,"div",5)(8,"app-listing-date-input-filter",6),d("filterChange",function(m){return e.onDateFilterChange(m)}),r()(),s(9,"div",5)(10,"app-listing-select-input-filter",7),d("filterChange",function(m){return e.onSelectFilterChange(m)}),r()()(),s(11,"div",8)(12,"div",3)(13,"app-listing-radio-input-filter",9),d("filterChange",function(m){return e.onRadioFilterChange(m)}),r()()()()()(),s(14,"div",10)(15,"div",3)(16,"div",4),l(17,"app-listing-table",11),r()()(),s(18,"div",10)(19,"div",3),_(20,Qe,1,1,"app-information-alert",12)(21,Ue,1,1,"app-information-alert",13),r()()()),t&2&&(a(10),o("options",e.selectInputOptions),a(3),o("inputOptions",e.radioButtonOptions)("groupClass",e.groupClass)("hideCircle",!0),a(4),o("categories",e.categories)("dataObject",e.dataObject)("actionCategories",e.actionCategories),a(3),o("ngIf",e.warningMessage),a(),o("ngIf",e.errorMessage))},dependencies:[S,R,E,H,ie,ne]})};var ze=[{path:"",component:Z,children:[{path:"",redirectTo:"welcome",pathMatch:"full"},{path:"welcome",component:L},{path:"create-home",component:K},{path:"homes",component:X},{path:"list-devices",component:ye},{path:"notifications",component:oe},{path:"list-supported-devices",component:Ie}]}],re=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=x({type:n});static \u0275inj=V({imports:[se.forChild(ze),se]})};var De=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=x({type:n});static \u0275inj=V({imports:[N,re,U,L,B,Q,W,R,E,be,_e,z,G,Me]})};export{De as HomeOwnerModule};
